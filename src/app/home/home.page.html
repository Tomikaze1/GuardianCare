<ion-content [fullscreen]="true" [scrollY]="false" id="home-content" class="modern-content">

  <div class="app-header">
    
    <!-- Location Section -->
    <div class="location-section">
      <div class="location-title-bar">
        <ion-icon name="location"></ion-icon>
        <span class="section-label">Current Location</span>
      </div>
      <div class="location-content">
        <p class="location-address-text">{{ currentAddress || 'Getting your location...' }}</p>
        <div class="location-coordinates" *ngIf="currentLocation">
          <ion-icon name="map-outline" class="coord-icon"></ion-icon>
          <span class="coord-data">{{ currentLocation.lat.toFixed(5) }}, {{ currentLocation.lng.toFixed(5) }}</span>
          <span class="acc-data" *ngIf="gpsAccuracy">Â±{{ gpsAccuracy.accuracy }}m</span>
        </div>
      </div>
    </div>

    <!-- Status Cards -->
    <div class="status-cards">
      <div class="status-card" [class]="getSafetyStatusClass()">
        <div class="card-top">
          <ion-icon name="pulse" class="card-icon"></ion-icon>
          <span class="card-label">Risk Level</span>
        </div>
        <div class="card-content-simple">
          <span class="risk-level-display">
            <span *ngIf="getSafetyStatusClass() === 'level-1'">1 - Low Zone</span>
            <span *ngIf="getSafetyStatusClass() === 'level-2'">2 - Moderate Zone</span>
            <span *ngIf="getSafetyStatusClass() === 'level-3'">3 - High Zone</span>
            <span *ngIf="getSafetyStatusClass() === 'level-4'">4 - Critical Zone</span>
            <span *ngIf="getSafetyStatusClass() === 'level-5'">5 - Extreme Zone</span>
            <span *ngIf="getSafetyStatusClass() === 'safe' || getSafetyStatusClass() === 'low-risk' || getSafetyStatusClass() === 'no-heatmap-zone'">Safe Area</span>
          </span>
        </div>
      </div>
      
      <div class="status-card incident-card" *ngIf="hasNearbyReports">
        <div class="card-top">
          <ion-icon name="alert-circle" class="card-icon"></ion-icon>
          <span class="card-label">Nearby Incidents</span>
        </div>
        <div class="card-content-simple">
          <span class="incident-display">{{ nearbyReportsCount }} - within 500m radius </span>
        </div>
      </div>
      
      <div class="status-card safe-card" *ngIf="!hasNearbyReports && currentLocation">
        <div class="card-top">
          <ion-icon name="shield-checkmark" class="card-icon"></ion-icon>
          <span class="card-label">Zone Status</span>
        </div>
        <div class="card-content-simple">
          <span class="safe-display">Clear - No threats nearby</span>
        </div>
      </div>
    </div>

  </div>

  <div id="map" class="modern-map"></div>
  
  <div class="modern-legend" *ngIf="isHeatmapVisible">
    <div class="legend-card">
      <div class="legend-header">
        <ion-icon name="analytics-outline"></ion-icon>
        <span>Risk Levels</span>
      </div>
      <div class="legend-items">
        <div class="legend-item level-1">
          <div class="legend-color"></div>
          <span>Low</span>
        </div>
        <div class="legend-item level-2">
          <div class="legend-color"></div>
          <span>Moderate</span>
        </div>
        <div class="legend-item level-3">
          <div class="legend-color"></div>
          <span>High</span>
        </div>
        <div class="legend-item level-4">
          <div class="legend-color"></div>
          <span>Critical</span>
        </div>
        <div class="legend-item level-5">
          <div class="legend-color"></div>
          <span>Extreme</span>
        </div>
      </div>
    </div>
  </div>
  
  <div class="fab-container">
    <button class="fab-secondary emergency-fab" 
            (click)="callEmergency()">
      <ion-icon name="call-outline"></ion-icon>
      <div class="fab-ripple"></div>
    </button>
    
    <button class="fab-main panic-fab" 
            (click)="triggerPanicButton()" 
            [disabled]="isPanicActive">
      <ion-icon name="alert-circle-outline"></ion-icon>
      <div class="fab-ripple"></div>
    </button>
    
    <button class="fab-secondary heatmap-fab" 
            (click)="toggleHeatmap()"
            [class.active]="isHeatmapVisible">
      <ion-icon name="flame-outline"></ion-icon>
      <div class="fab-ripple"></div>
    </button>
    
  </div>
  

</ion-content>
